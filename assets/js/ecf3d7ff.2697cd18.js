"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[141],{7932(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"authentication/oauth-overview","title":"OAuth Overview","description":"Instagram Business Login uses OAuth 2.0 for authentication. This guide explains the flow and how the SDK helps.","source":"@site/docs/authentication/oauth-overview.md","sourceDirName":"authentication","slug":"/authentication/oauth-overview","permalink":"/Instagram-graph-api-sdk/authentication/oauth-overview","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Installation","permalink":"/Instagram-graph-api-sdk/getting-started/installation"},"next":{"title":"Access Tokens","permalink":"/Instagram-graph-api-sdk/authentication/access-tokens"}}');var a=t(4848),r=t(8453);const i={sidebar_position:1},c="OAuth Overview",o={},l=[{value:"The OAuth Flow",id:"the-oauth-flow",level:2},{value:"Token Types",id:"token-types",level:2},{value:"SDK OAuth Helpers",id:"sdk-oauth-helpers",level:2},{value:"Step 1: Build Authorization URL",id:"step-1-build-authorization-url",level:3},{value:"Step 2: Handle Callback",id:"step-2-handle-callback",level:3},{value:"Step 3: Exchange Code for Token",id:"step-3-exchange-code-for-token",level:3},{value:"Step 4: Use the Token",id:"step-4-use-the-token",level:3},{value:"Available Scopes",id:"available-scopes",level:2},{value:"Security Tips",id:"security-tips",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"oauth-overview",children:"OAuth Overview"})}),"\n",(0,a.jsx)(n.p,{children:"Instagram Business Login uses OAuth 2.0 for authentication. This guide explains the flow and how the SDK helps."}),"\n",(0,a.jsx)(n.h2,{id:"the-oauth-flow",children:"The OAuth Flow"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-mermaid",children:'sequenceDiagram\n    participant User\n    participant YourApp\n    participant Instagram\n    participant Meta API\n    \n    User->>YourApp: Click "Login with Instagram"\n    YourApp->>Instagram: Redirect to auth URL\n    Instagram->>User: Show login & permissions\n    User->>Instagram: Approve access\n    Instagram->>YourApp: Redirect with code\n    YourApp->>Meta API: Exchange code for token\n    Meta API->>YourApp: Return access token\n'})}),"\n",(0,a.jsx)(n.h2,{id:"token-types",children:"Token Types"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Token Type"}),(0,a.jsx)(n.th,{children:"Duration"}),(0,a.jsx)(n.th,{children:"Use Case"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Authorization Code"})}),(0,a.jsx)(n.td,{children:"1 hour"}),(0,a.jsx)(n.td,{children:"Exchange for access token"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Short-Lived Token"})}),(0,a.jsx)(n.td,{children:"1 hour"}),(0,a.jsx)(n.td,{children:"Immediately exchange for long-lived"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Long-Lived Token"})}),(0,a.jsx)(n.td,{children:"60 days"}),(0,a.jsx)(n.td,{children:"Use for API calls"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"sdk-oauth-helpers",children:"SDK OAuth Helpers"}),"\n",(0,a.jsxs)(n.p,{children:["The SDK provides the ",(0,a.jsx)(n.code,{children:"InstagramOAuth"})," class for handling the entire flow:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { InstagramOAuth } from 'instagram-graph-api-sdk';\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-1-build-authorization-url",children:"Step 1: Build Authorization URL"}),"\n",(0,a.jsx)(n.p,{children:"Create the URL to redirect users to Instagram:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const authUrl = InstagramOAuth.buildAuthorizationUrl({\n  clientId: process.env.INSTAGRAM_APP_ID!,\n  redirectUri: 'https://your-app.com/callback',\n  scopes: InstagramOAuth.getDefaultScopes(),\n  state: 'random-state-for-csrf', // IMPORTANT for security\n});\n\n// Redirect user to authUrl\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-handle-callback",children:"Step 2: Handle Callback"}),"\n",(0,a.jsx)(n.p,{children:"Parse the callback URL when user returns:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// In your callback route handler\nconst callbackUrl = 'https://your-app.com/callback?code=ABC...&state=random-state';\n\nconst { code, state, error } = InstagramOAuth.parseCallback(callbackUrl);\n\nif (error) {\n  console.error('User denied access:', error);\n  return;\n}\n\n// Verify state matches what you sent!\nif (state !== savedState) {\n  throw new Error('CSRF detected!');\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-exchange-code-for-token",children:"Step 3: Exchange Code for Token"}),"\n",(0,a.jsx)(n.p,{children:"Get a long-lived access token:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const tokens = await InstagramOAuth.exchangeCodeForToken({\n  clientId: process.env.INSTAGRAM_APP_ID!,\n  clientSecret: process.env.INSTAGRAM_APP_SECRET!,\n  redirectUri: 'https://your-app.com/callback',\n  code: code,\n});\n\nconsole.log('Access Token:', tokens.access_token);\nconsole.log('User ID:', tokens.user_id);\nconsole.log('Expires in:', tokens.expires_in, 'seconds');\n\n// Save tokens.access_token to your database!\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-4-use-the-token",children:"Step 4: Use the Token"}),"\n",(0,a.jsx)(n.p,{children:"Create a client with the user's token:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { InstagramClient } from 'instagram-graph-api-sdk';\n\nconst client = new InstagramClient({\n  accessToken: tokens.access_token,\n});\n\nconst profile = await client.users.getProfile();\nconsole.log(`Logged in as @${profile.username}`);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"available-scopes",children:"Available Scopes"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Scope"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"instagram_business_basic"})}),(0,a.jsx)(n.td,{children:"Read profile and media"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"instagram_business_content_publish"})}),(0,a.jsx)(n.td,{children:"Publish posts"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"instagram_business_manage_comments"})}),(0,a.jsx)(n.td,{children:"Moderate comments"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"instagram_business_manage_messages"})}),(0,a.jsx)(n.td,{children:"Read/send DMs"})]})]})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// Get default scopes (recommended)\nconst scopes = InstagramOAuth.getDefaultScopes();\n// ['instagram_business_basic', 'instagram_business_manage_messages', \n//  'instagram_business_manage_comments', 'instagram_business_content_publish']\n\n// Or get all available scopes\nconst allScopes = InstagramOAuth.getAllScopes();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"security-tips",children:"Security Tips"}),"\n",(0,a.jsx)(n.admonition,{title:"CSRF Protection",type:"warning",children:(0,a.jsxs)(n.p,{children:["Always use the ",(0,a.jsx)(n.code,{children:"state"})," parameter and verify it on callback to prevent CSRF attacks."]})}),"\n",(0,a.jsx)(n.admonition,{title:"Server-Side Only",type:"danger",children:(0,a.jsx)(n.p,{children:"Token exchange must happen server-side. Never expose your App Secret to the client."})}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/authentication/access-tokens",children:"Access Tokens"})," - Token lifecycle and refresh"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/authentication/sdk-oauth",children:"SDK OAuth"})," - Full implementation example"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>c});var s=t(6540);const a={},r=s.createContext(a);function i(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);