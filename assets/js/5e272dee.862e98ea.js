"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[260],{5023(e,s,i){i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"api-reference/webhooks","title":"WebhooksApi","description":"Manage webhook subscriptions and utilities.","source":"@site/docs/api-reference/webhooks.md","sourceDirName":"api-reference","slug":"/api-reference/webhooks","permalink":"/Instagram-graph-api-sdk/api-reference/webhooks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"docsSidebar","previous":{"title":"InsightsApi","permalink":"/Instagram-graph-api-sdk/api-reference/insights"}}');var r=i(4848),a=i(8453);const t={sidebar_position:10},o="WebhooksApi",c={},d=[{value:"Methods",id:"methods",level:2},{value:"subscribe()",id:"subscribe",level:3},{value:"unsubscribe()",id:"unsubscribe",level:3},{value:"getSubscribedFields()",id:"getsubscribedfields",level:3},{value:"Utilities",id:"utilities",level:2},{value:"InstagramWebhooks.verifySignature()",id:"instagramwebhooksverifysignature",level:3},{value:"InstagramWebhooks.parsePayload()",id:"instagramwebhooksparsepayload",level:3}];function l(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"webhooksapi",children:"WebhooksApi"})}),"\n",(0,r.jsx)(s.p,{children:"Manage webhook subscriptions and utilities."}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"subscribe",children:"subscribe()"}),"\n",(0,r.jsx)(s.p,{children:"Subscribe your app to receive notifications for specific fields."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"const result = await client.webhooks.subscribe(['messages', 'comments']);\nconsole.log(result.success); // true\n"})}),"\n",(0,r.jsx)(s.h3,{id:"unsubscribe",children:"unsubscribe()"}),"\n",(0,r.jsx)(s.p,{children:"Unsubscribe your app from all fields (or specific ones if supported)."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"// Unsubscribe from everything\nawait client.webhooks.unsubscribe();\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getsubscribedfields",children:"getSubscribedFields()"}),"\n",(0,r.jsx)(s.p,{children:"Get the list of fields your app is currently subscribed to."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"const response = await client.webhooks.getSubscribedFields();\nconsole.log(response.data[0].subscribed_fields);\n// ['messages', 'comments']\n"})}),"\n",(0,r.jsx)(s.h2,{id:"utilities",children:"Utilities"}),"\n",(0,r.jsx)(s.p,{children:"Static utilities for handling incoming webhook requests."}),"\n",(0,r.jsx)(s.h3,{id:"instagramwebhooksverifysignature",children:"InstagramWebhooks.verifySignature()"}),"\n",(0,r.jsxs)(s.p,{children:["Verify the ",(0,r.jsx)(s.code,{children:"X-Hub-Signature-256"})," header."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { InstagramWebhooks } from 'instagram-graph-api-sdk';\n\nconst isValid = InstagramWebhooks.verifySignature(\n  rawRequestBody, // string\n  signatureHeader, // 'sha256=...'\n  appSecret\n);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"instagramwebhooksparsepayload",children:"InstagramWebhooks.parsePayload()"}),"\n",(0,r.jsx)(s.p,{children:"Type-safe parser for webhook payloads."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"const payload = InstagramWebhooks.parsePayload(jsonBody);\n\n// payload is structured as:\n// {\n//   object: 'instagram',\n//   entry: [{ ... }]\n// }\n"})})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,s,i){i.d(s,{R:()=>t,x:()=>o});var n=i(6540);const r={},a=n.createContext(r);function t(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);