"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[563],{3976(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"guides/messaging","title":"Messaging","description":"Send and receive Instagram Direct Messages.","source":"@site/docs/guides/messaging.md","sourceDirName":"guides","slug":"/guides/messaging","permalink":"/Instagram-graph-api-sdk/guides/messaging","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Publishing Content","permalink":"/Instagram-graph-api-sdk/guides/publishing"},"next":{"title":"Comment Moderation","permalink":"/Instagram-graph-api-sdk/guides/comments"}}');var i=t(4848),a=t(8453);const r={sidebar_position:3},l="Messaging",o={},d=[{value:"Important: Messaging Rules",id:"important-messaging-rules",level:2},{value:"List Conversations",id:"list-conversations",level:2},{value:"Get Messages",id:"get-messages",level:2},{value:"Send Text Message",id:"send-text-message",level:2},{value:"With Human Agent Tag",id:"with-human-agent-tag",level:3},{value:"Send Media",id:"send-media",level:2},{value:"Send Quick Replies",id:"send-quick-replies",level:2},{value:"Send Templates",id:"send-templates",level:2},{value:"Generic Template (Carousel)",id:"generic-template-carousel",level:3},{value:"Button Template",id:"button-template",level:3},{value:"Private Reply to Comment",id:"private-reply-to-comment",level:2},{value:"React to Message",id:"react-to-message",level:2},{value:"Typing Indicator",id:"typing-indicator",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"messaging",children:"Messaging"})}),"\n",(0,i.jsx)(n.p,{children:"Send and receive Instagram Direct Messages."}),"\n",(0,i.jsx)(n.h2,{id:"important-messaging-rules",children:"Important: Messaging Rules"}),"\n",(0,i.jsx)(n.admonition,{title:"24-Hour Window",type:"warning",children:(0,i.jsx)(n.p,{children:"You can only message users who have messaged you first, within the last 24 hours."})}),"\n",(0,i.jsx)(n.admonition,{title:"Human Agent Tag",type:"info",children:(0,i.jsxs)(n.p,{children:["For customer service, you can use the ",(0,i.jsx)(n.code,{children:"HUMAN_AGENT"})," tag to extend the window to 7 days."]})}),"\n",(0,i.jsx)(n.h2,{id:"list-conversations",children:"List Conversations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const conversations = await client.conversations.list({\n  limit: 10,\n});\n\nconversations.data.forEach(conv => {\n  console.log('Conversation ID:', conv.id);\n  console.log('Updated:', conv.updated_time);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"get-messages",children:"Get Messages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const messages = await client.conversations.getMessages(conversationId);\n\nmessages.messages.data.forEach(msg => {\n  console.log(`[${msg.from}]: ${msg.message}`);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"send-text-message",children:"Send Text Message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendText(\n  recipientIgsid,  // Instagram-scoped User ID\n  'Hello! Thanks for reaching out.'\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-human-agent-tag",children:"With Human Agent Tag"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendText(\n  recipientIgsid,\n  'Our team will follow up shortly.',\n  { humanAgent: true }  // Extends window to 7 days\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"send-media",children:"Send Media"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Send an image\nawait client.messaging.sendMedia(recipientIgsid, {\n  type: 'image',\n  url: 'https://example.com/image.jpg',\n});\n\n// Send a video\nawait client.messaging.sendMedia(recipientIgsid, {\n  type: 'video',\n  url: 'https://example.com/video.mp4',\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"send-quick-replies",children:"Send Quick Replies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendQuickReplies(recipientIgsid, {\n  text: 'How can I help you?',\n  replies: [\n    { content_type: 'text', title: 'Order Status', payload: 'order_status' },\n    { content_type: 'text', title: 'Return Item', payload: 'return' },\n    { content_type: 'text', title: 'Talk to Human', payload: 'human' },\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"send-templates",children:"Send Templates"}),"\n",(0,i.jsx)(n.h3,{id:"generic-template-carousel",children:"Generic Template (Carousel)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendGenericTemplate(recipientIgsid, {\n  elements: [\n    {\n      title: 'Product Name',\n      subtitle: '$29.99',\n      image_url: 'https://example.com/product.jpg',\n      buttons: [\n        { type: 'web_url', url: 'https://shop.com/product', title: 'View' },\n      ],\n    },\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"button-template",children:"Button Template"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendButtonTemplate(recipientIgsid, {\n  text: 'What would you like to do?',\n  buttons: [\n    { type: 'web_url', url: 'https://example.com', title: 'Visit Website' },\n    { type: 'postback', title: 'Start Over', payload: 'restart' },\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"private-reply-to-comment",children:"Private Reply to Comment"}),"\n",(0,i.jsx)(n.p,{children:"Reply privately to someone who commented:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"await client.messaging.sendPrivateReply(\n  commentId,\n  'Thanks for your comment! Check your DM.'\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"react-to-message",children:"React to Message"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// React with emoji\nawait client.messaging.reactToMessage(\n  recipientIgsid,\n  messageId,\n  'love'  // love, like, laugh, wow, sad, angry\n);\n\n// Remove reaction\nawait client.messaging.unreactToMessage(recipientIgsid, messageId);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"typing-indicator",children:"Typing Indicator"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Show typing\nawait client.messaging.sendTypingIndicator(recipientIgsid, true);\n\n// Simulate typing...\nawait new Promise(r => setTimeout(r, 2000));\n\n// Send message (typing auto-stops)\nawait client.messaging.sendText(recipientIgsid, 'Here is your answer!');\n"})})]})}function g(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);